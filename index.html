<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8" />
<title>Bloody Donut</title>
<link rel="icon" type="image/jpeg" href="favicon.jpg">

<style>
  body {
    margin: 0;
    font-family: Arial, sans-serif;
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    text-align: center;
    padding: 20px;

    /* Background image */
    background: url('shark.png') no-repeat center center fixed;
    background-size: cover;

    /* Dark overlay so text is readable */
    position: relative;
    color: #ffffff;
  }

  /* Overlay to darken the image */
  body::before {
    content: '';
    position: absolute;
    top:0;
    left:0;
    width:100%;
    height:100%;
    background: rgba(140, 20, 252, 1);
    z-index:0;
  }

  /* Make text appear above overlay */
  #date, #chapter, #tomorrow, #countdown, #tester {
    position: relative;
    z-index: 1;
  }

  #date {
    font-size: 1rem;
    color: #ccc;
    margin-bottom: 10px;
  }

  #chapter {
    font-size: 4rem;
    font-weight: bold;
    margin-bottom: 10px;
  }

  #tomorrow {
    font-size: 1.5rem;
    color: #aaa;
    margin-bottom: 10px;
  }

  #countdown {
    font-size: 1.3rem;
    color: #ffccff;
    margin-top: 10px;
    position: relative;
    z-index: 1;
  }

  /* Mobile scaling */
  @media (max-width: 600px) {
    #chapter {
      font-size: 2.5rem;
    }
    #tomorrow {
      font-size: 1.2rem;
    }
    #date {
      font-size: 0.9rem;
    }
  }

  /* Test date box */
  #tester {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: rgba(30,30,30,0.9);
    padding: 10px;
    border-radius: 8px;
    font-size: 0.9rem;
  }

  #tester input {
    background: #000;
    color: white;
    border: 1px solid #555;
    padding: 4px;
    border-radius: 4px;
  }

  #tester button {
    margin-left: 5px;
    padding: 4px 8px;
    background: #222;
    color: white;
    border: 1px solid #444;
    border-radius: 4px;
    cursor: pointer;
  }

  #tester button:hover {
    background: #333;
  }
</style>
</head>
<body>
<!--view tracker .png-->
<img src="https://raw.githubusercontent.com/23CadenS/Doughnut/main/track.png" width="1" height="1" style="opacity:0; position:absolute;" />

<div id="date"></div>
<div id="chapter"></div>
<div id="tomorrow"></div>
<div id="countdown"></div>

<!-- Test-date box -->
<div id="tester">
  Test date:
  <input type="date" id="testInput">
  <button onclick="applyTestDate()">Go</button>
</div>

<script>
// Books from Mark â†’ Revelation
const books = [
  ["Mark", 16], ["John", 21], ["1 Corinthians", 16], ["2 Corinthians", 13],
  ["1 Thessalonians", 5], ["2 Thessalonians", 3],
  ["1 Timothy", 6], ["2 Timothy", 4], ["Titus", 3], ["Philemon", 1],
  ["Hebrews", 13], ["1 Peter", 5], ["2 Peter", 3],
  ["1 John", 5], ["2 John", 1], ["3 John", 1], ["Jude", 1],
  ["Revelation", 22]
];

let chapters = [];
books.forEach(b => {
  for (let c = 1; c <= b[1]; c++) {
    chapters.push(`${b[0]} ${c}`);
  }
});

const startIndex = chapters.indexOf("Mark 4");
const lastIndex = chapters.length - 1;

function daysBetween(a, b) {
  const ms = 86400000;
  return Math.floor((a - b) / ms);
}

function getAnchor(date) {
  const dec1 = new Date(date.getFullYear(), 11, 1);
  return date < dec1 ? new Date(date.getFullYear() - 1, 11, 1) : dec1;
}

function getIndexFor(date) {
  const anchor = getAnchor(date);
  const diff = daysBetween(
    new Date(date.getFullYear(), date.getMonth(), date.getDate()),
    anchor
  );
  return (startIndex + diff) % chapters.length;
}

function display(date) {
  document.getElementById("date").textContent = date.toDateString();

  const todayIndex = getIndexFor(date);
  document.getElementById("chapter").textContent = chapters[todayIndex];

  const tomorrow = new Date(date);
  tomorrow.setDate(tomorrow.getDate() + 1);
  document.getElementById("tomorrow").textContent =
    "Tomorrow: " + chapters[getIndexFor(tomorrow)];

  // Countdown
  let daysLeft = lastIndex - todayIndex;
  if (daysLeft < 0) daysLeft += chapters.length;

  document.getElementById("countdown").textContent =
    `${daysLeft} days till complete!!!`;
}

function applyTestDate() {
  const val = document.getElementById("testInput").value;
  if (!val) return;
  display(new Date(val));
}

display(new Date());
</script>

</body>
</html>
